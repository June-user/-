<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/style/prod.css">
    <link rel="stylesheet" href="/style/main.css"> 

</head>
<body class="body__prod">
    <a name="bread"></a>
<main class="body__product">
    <div class="header__product">
        <div class="header__about">
            <a class="button-52" href="/main.html"><p class="button__text in">На главную</p></a>
        </div>
        <div class="header__prod">
            <a class="button-52" href="#prod"><p class="button__text in">Продукция</p></a>
        </div>
        <div class="header__delivery">
            <a class="button-52" href="/deliv.html" target="_blank"><p class="button__text in">Контакты</p></a>
        </div>
        <div class="header__basket">
            <a class="button-52" href="#basket"><p class="button__text in">Корзина</p></a>
        </div>
    </div>
    
    <div class="stroka razdel">ХЛЕБ</div>
    <div class="product-list">
        <div class="card bread">
            <div class="imgBox">
                <img src="/img/008_IMG_9650 2.svg" alt="mouse corsair" class="mouse">
            </div>
            <div class="contentBox product-item">
                <h3>ПОДМОСКОВНЫЙ БАТОН</h3>
                <h2 class="price">50 ₽</h2>
                <button class="add-to-cart buy" data-id="1" data-name="Подмосковный батон" data-price="50">В корзину</a>
            </div>
        </div>

        <div class="card bread">
            <div class="imgBox">
                <img src="/img/нарезной.svg" alt="mouse corsair" class="mouse">
            </div>
            <div class="contentBox product-item">
                <h3>БАТОН НАРЕЗНОЙ</h3>
                <h2 class="price">50 ₽</h2>
                <button class="add-to-cart buy" data-id="2" data-name="Батон нарезной" data-price="50">В корзину</a>
            </div>
        </div>    
        <div class="card bread">
            <div class="imgBox">
                <img src="/img/столичный.svg" alt="mouse corsair" class="mouse">
            </div>
            <div class="contentBox product-item">
                <h3>СТОЛИЧНЫЙ БАТОН</h3>
                <h2 class="price">60 ₽</h2>
                <button class="add-to-cart buy" data-id="3" data-name="Столичный батон" data-price="60">В корзину</a>
            </div>
        </div>
        <div class="card bread">
            <div class="imgBox">
                <img src="/img/дарницкий.svg" alt="mouse corsair" class="mouse">
            </div>
            <div class="contentBox product-item">
                <h3>ДАРНИЦКИЙ</h3>
                <h2 class="price">60 ₽</h2>
                <button class="add-to-cart buy" data-id="4" data-name="Дарницкий" data-price="60">В корзину</a>
            </div>
        </div>

        <div class="card bread">
            <div class="imgBox">
                <img src="/img/бородинский.svg" alt="mouse corsair" class="mouse">
            </div>
            <div class="contentBox product-item">
                <h3>РЖАНОЙ БОРОДИНСКИЙ</h3>
                <h2 class="price">70 ₽</h2>
                <button class="add-to-cart buy" data-id="5" data-name="Ржаной бородинский" data-price="70"><a name="sweat"></a>В корзину</button>
            </div>
        </div>
    </div>
    <div class="product-list">
        <div class="stroka razdel">СЛАДОСТИ</div>
        <div class="card sweat">
            <div class="imgBox">
                <img src="/img/булка.svg" alt="mouse corsair" class="mouse">
            </div>
            <div class="contentBox product-item">
                <h3>ВИТАЯ БУЛКА</h3>
                <h2 class="price">55 ₽</h2>
                <button class="add-to-cart buy" data-id="6" data-name="Витая булка" data-price="55">В корзину</button>
            </div>
        </div>

        <div class="card sweat">
            <div class="imgBox">
                <img src="/img/калач.svg" alt="mouse corsair" class="mouse">
            </div>
            <div class="contentBox product-item">
                <h3>КИЕВСКИЙ КАЛАЧ</h3>
                <h2 class="price">60 ₽</h2>
                <button class="add-to-cart buy" data-id="7" data-name="Киевский калач" data-price="60">В корзину</button>
            </div>
        </div>

        <div class="card sweat">
            <div class="imgBox">
                <img src="/img/вафли.svg" alt="mouse corsair" class="mouse">
            </div>
            <div class="contentBox product-item">
                <h3>ВАФЛИ-ТРУБОЧКИ</h3>
                <h2 class="price">100 ₽</h2>
                <button class="add-to-cart buy" data-id="8" data-name="Вафли-трубочки" data-price="100">В корзину</button>
            </div>
        </div>

        <div class="card sweat">
            <div class="imgBox">
                <img src="/img/баба.svg" alt="mouse corsair" class="mouse">
            </div>
            <div class="contentBox product-item">
                <h3>РОМОВАЯ БАБА</h3>
                <h2 class="price">60 ₽</h2>
                <button class="add-to-cart buy" data-id="9" data-name="Ромовая баба" data-price="60">В корзину</button>
            </div>
        </div>

        <div class="card sweat">
            <div class="imgBox">
                <img src="/img/орешки.svg" alt="mouse corsair" class="mouse">
            </div>
            <div class="contentBox product-item">
                <h3>ОРЕШКИ</h3>
                <h2 class="price">100 ₽</h2>
                <button class="add-to-cart buy" data-id="10" data-name="Орешки" data-price="100"><a name="tea"></a>В корзину</button>
            </div>
        </div>
    </div>
    <div class="product-list">
        <div class="stroka razdel">ЧАЙ, КОФЕ</div>
        <div class="card drink">
            <div class="imgBox">
                <img src="/img/чай.svg" alt="mouse corsair" class="mouse">
            </div>
            <div class="contentBox product-item">
                <h3>ИНДИЙСКИЙ ЧАЙ</h3>
                <h2 class="price">60 ₽</h2>
                <button class="add-to-cart buy" data-id="11" data-name="Индийский чай" data-price="60">В корзину</button>
            </div>
        </div>

        <div class="card drink">
            <div class="imgBox">
                <img src="/img/кофе.svg" alt="mouse corsair" class="mouse">
            </div>
            <div class="contentBox product-item">
                <h3>КОФЕ</h3>
                <h2 class="price">80 ₽</h2>
                <button class="add-to-cart buy" data-id="12" data-name="Кофе" data-price="80">В корзину</button>
            </div>
        </div>

        <div class="card drink">
            <div class="imgBox">
                <img src="/img/какава.svg" alt="mouse corsair" class="mouse">
            </div>
            <div class="contentBox product-item">
                <h3>КАКАВА</h3>
                <h2 class="price">90 ₽</h2>
                <button class="add-to-cart buy" data-id="13" data-name="Какава" data-price="90">В корзину</button>
            </div>
        </div>
    </div>
</main>

<h2 class="razdel"><a name="basket">КОРЗИНА</a></h2>
<section class="cart-items">
    <div class="korzina">
        <p>Товар</p>
        <p>Количество</p>
        <p>Цена</p>
        <p>Сумма</p>
        <p>Удалить</p>
    </div>
    <div class="polosa"></div>
    <div id="cart-table-body">
        <!-- Корзина будет заполняться динамически с помощью JavaScript -->
    </div>
  </section>

  <section class="cart-summary">
    <div class="cart-total">
      <p>Сумма: <span id="cart-total">₽ 0.00</span></p>
    </div>
    <button class="button-52 checkout-btn" id="go-to-order" onclick="document.location='/deliv.html?source=delivery'" disabled><div class="button__text in">Перейти к заказу</div></button>
  </section>

  <footer class="footer">
    <div class="footer__logo">
      <img src="/img/лого.png" alt="Company Logo">
      <p>© "ХЛЕБОПЁКА" 2004-2024</p>
    </div>
    <div class="footer__links">
      <a href="/main.html">На главную</a>
      <a href="/main.html#about">О нас</a>
      <a href="#prod">Продукция</a>
      <a href="/deliv.html" target="_blank" >Контакты</a>
      <a href="/map.html">Карта сайта</a>
    </div>
    <div class="footer__social">
      <a href="#" class="footer__social-link">
        <img src="/img/телеграмм.svg" alt="">
        <i class="fab fa-facebook-f"></i>
      </a>
      <a href="#" class="footer__social-link">
        <img src="/img/инста.svg" alt="">
        <i class="fab fa-twitter"></i>
      </a>
      <a href="#" class="footer__social-link">
        <img src="/img/вк.svg" alt="">
        <i class="fab fa-instagram"></i>
      </a>
    </div>
  </footer>
    
</body>
<script>
    let cartItems = [];

// Функция для добавления товара в корзину
function addToCart(id, name, price) {
  const existingItem = cartItems.find(item => item.id === id);

  if (existingItem) {
    existingItem.quantity++;
  } else {
    cartItems.push({ id, name, price, quantity: 1 });
  }

  renderCartItems();
}

// Функция для отображения товаров в корзине
function renderCartItems() {
  const cartTableBody = document.getElementById('cart-table-body');
  cartTableBody.innerHTML = '';

  let totalPrice = 0;

  cartItems.forEach(item => {
    const row = document.createElement('div');

    const productCell = document.createElement('p');
    productCell.textContent = item.name;
    row.appendChild(productCell);

    const quantityCell = document.createElement('p');
    quantityCell.className = "button-card-wrapper";
    quantityCell.textContent = item.quantity;

    const removeBtn = document.createElement('button');
    removeBtn.className = "rem";
    removeBtn.textContent = '-';
    removeBtn.addEventListener('click', () => removeFromCart(item.id));
    quantityCell.appendChild(removeBtn);

    const addBtn = document.createElement('button');
    addBtn.className = "add";
    addBtn.textContent = '+';
    addBtn.addEventListener('click', () => addFromCart(item.id));
    quantityCell.appendChild(addBtn);

    row.appendChild(quantityCell);

    const priceCell = document.createElement('p');
    priceCell.textContent = `₽${item.price.toFixed(2)}`;
    row.appendChild(priceCell);

    const totalCell = document.createElement('p');
    const itemTotal = item.quantity * item.price;
    totalCell.textContent = `₽${itemTotal.toFixed(2)}`;
    row.appendChild(totalCell);

    const delCell = document.createElement('p');
    const delBtn = document.createElement('button');
    delBtn.className = "del";
    delBtn.textContent = 'х';
    delBtn.addEventListener('click', () => delFromCart(item.id));
    delCell.appendChild(delBtn);
    row.appendChild(delCell);

    cartTableBody.appendChild(row);

    totalPrice += itemTotal;

  });
  
  document.getElementById('cart-total').textContent = `₽${totalPrice.toFixed(2)}`;


   // Обновляем состояние кнопки "Перейти к заказу"
   const goToOrderButton = document.getElementById('go-to-order');
  if (totalPrice > 0) {
    goToOrderButton.disabled = false;
  } else {
    goToOrderButton.disabled = true;
  }

}


// Функция для удаление товара из корзины
function removeFromCart(itemId) {
  const itemIndex = cartItems.findIndex(item => item.id === itemId);

  if (itemIndex !== -1) {
    const item = cartItems[itemIndex];
    item.quantity--;

    if (item.quantity === 0) {
      cartItems.splice(itemIndex, 1);
    }

    renderCartItems();
  }
}

function addFromCart(itemId) {
  const itemIndex = cartItems.findIndex(item => item.id === itemId);

  if (itemIndex !== -1) {
    const item = cartItems[itemIndex];
    item.quantity++;

    renderCartItems();
  }
}

function delFromCart(itemId) {
    const itemIndex = cartItems.findIndex(item => item.id === itemId);
    if (itemIndex !== -1) {
    cartItems.splice(itemIndex, 1);
    renderCartItems();
    }
}

// Добавление обработчиков событий для кнопок "Add to Cart"
const addToCartButtons = document.querySelectorAll('.add-to-cart');
addToCartButtons.forEach(button => {
  button.addEventListener('click', () => {
    const id = button.dataset.id;
    const name = button.dataset.name;
    const price = parseFloat(button.dataset.price);
    addToCart(id, name, price);
  });
});
    </script>


</html>